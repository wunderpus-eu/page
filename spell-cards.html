<!DOCTYPE html>
<html lang="en" class="spell-cards-page">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Spell cards – Wunderpus</title>
        <meta
            name="description"
            content="Generate and print DnD 5e spell cards. Customize and export as PDF."
        />
        <link rel="icon" href="assets/logo_color.svg" type="image/svg+xml" />
        <link
            rel="alternate icon"
            href="assets/favicon.png"
            type="image/png"
            sizes="48x48"
        />
        <link rel="apple-touch-icon" href="assets/apple-touch-icon.png" />
        <link rel="stylesheet" href="css/style.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
            crossorigin="anonymous"
        />
        <script
            src="https://kit.webawesome.com/09159e6f02cb41ba.js"
            crossorigin="anonymous"
        ></script>
        <link rel="stylesheet" href="css/card-editor.css" />
        <link rel="stylesheet" id="main-css" href="css/card.css" />
        <link rel="stylesheet" href="css/card-print.css" media="print" />
        <script type="importmap">
            {
                "imports": {
                    "colord": "https://cdn.jsdelivr.net/npm/colord/+esm"
                }
            }
        </script>
    </head>
    <body class="spell-cards-page">
        <header class="header header--spell-cards">
            <div class="container header__top">
                <a href="index.html">
                    <img
                        src="assets/wordmark_color.svg"
                        alt="Wunderpus Wordmark"
                        class="wordmark"
                    />
                </a>
                <nav class="header-nav" aria-label="Main">
                    <wa-button
                        class="header-nav-toggle on-hero"
                        appearance="plain"
                        variant="neutral"
                        size="small"
                        pill
                        aria-expanded="false"
                        aria-controls="header-nav-menu"
                        aria-label="Open menu"
                    >
                        <wa-icon
                            class="header-nav-toggle-icon"
                            name="bars"
                            aria-hidden="true"
                        ></wa-icon>
                    </wa-button>
                    <div id="header-nav-menu" class="header-nav-menu">
                        <wa-button class="on-hero" appearance="plain" variant="neutral" size="small" href="character-sheet.html">Character sheet</wa-button>
                        <wa-button class="on-hero" appearance="plain" variant="neutral" size="small" href="spell-cards.html">Spell cards</wa-button>
                        <wa-button class="on-hero" appearance="plain" variant="neutral" size="small" href="https://ko-fi.com/wunderpus" target="_blank" rel="noopener noreferrer">Support me</wa-button>
                    </div>
                </nav>
            </div>
            <div id="header-content" class="header__controls">
                <div class="container">
                <div class="controls">
                    <!-- Row 1: spell search (grows) + filter (fixed) -->
                    <div class="controls-row controls-row--search">
                        <div
                            id="spell-search-wrapper"
                            class="spell-search-wrapper"
                        >
                            <wa-dropdown
                                id="spell-combobox"
                                stay-open-on-select
                                hoist
                                class="spell-combobox-dropdown"
                            >
                                <wa-input
                                    slot="trigger"
                                    id="spell-search-input"
                                    class="on-hero"
                                    placeholder="Search spells to add..."
                                    with-clear
                                ></wa-input>
                                <div
                                    id="spell-list-popover"
                                    class="spell-list-popover"
                                >
                                    <div
                                        id="spell-list-chips"
                                        class="spell-list-chips"
                                    ></div>
                                    <div class="spell-list-header">
                                        <span
                                            id="spell-list-count"
                                            class="spell-list-count"
                                        ></span>
                                        <wa-button
                                            id="spell-list-add-all"
                                            size="small"
                                            variant="default"
                                            class="spell-list-inline-btn"
                                            ><wa-icon name="check-double" aria-hidden="true"></wa-icon> Add all</wa-button
                                        >
                                    </div>
                                    <div
                                        id="srd-banner"
                                        class="srd-banner hidden"
                                        aria-hidden="true"
                                    >
                                        <span id="srd-banner-text"></span>
                                        <wa-button
                                            id="srd-banner-info"
                                            variant="default"
                                            size="small"
                                            class="spell-list-inline-btn"
                                            title="Non-SRD info"
                                        >
                                            <wa-icon name="circle-info" aria-hidden="true"></wa-icon> Details
                                        </wa-button>
                                    </div>
                                    <div
                                        id="spell-list"
                                        class="spell-list"
                                    ></div>
                                </div>
                            </wa-dropdown>
                            <wa-dropdown id="filter-dropdown" hoist class="filter-dropdown">
                                <wa-button
                                    slot="trigger"
                                    class="filter-trigger-btn on-hero"
                                    appearance="plain"
                                    variant="neutral"
                                    size="small"
                                    pill
                                    title="Filters"
                                    aria-label="Filters"
                                >
                                    <wa-icon name="sliders" aria-hidden="true"></wa-icon>
                                </wa-button>
                                <div
                                    id="filter-menu-content"
                                    class="filter-menu-content"
                                >
                                    <div class="filter-chip-group filter-chip-group--source">
                                        <div class="filter-chip-group__header">
                                            <span class="filter-chip-label"
                                                >Source</span
                                            >
                                            <wa-button
                                                id="filter-clear-btn"
                                                class="filter-clear-btn hidden"
                                                appearance="plain"
                                                variant="neutral"
                                                size="small"
                                                title="Clear filters"
                                                aria-label="Clear filters"
                                            >
                                                <wa-icon name="broom" slot="start" aria-hidden="true"></wa-icon>
                                                Clear Filters
                                            </wa-button>
                                        </div>
                                        <div
                                            id="filter-source-chips"
                                            class="filter-chip-list"
                                        ></div>
                                        <div class="filter-menu-row filter-menu-row--toggle">
                                            <wa-switch id="filter-ruleset" checked></wa-switch>
                                            <span class="filter-menu-row__label">Use 2024 rules</span>
                                        </div>
                                        <div class="filter-menu-row filter-menu-row--toggle">
                                            <wa-switch
                                                id="filter-exclude-reprinted"
                                                checked
                                            ></wa-switch>
                                            <span class="filter-menu-row__label">Exclude reprinted</span>
                                        </div>
                                        <input
                                            type="file"
                                            id="upload-spells-input"
                                            class="visually-hidden-file-input"
                                            accept=".json,application/json"
                                            tabindex="-1"
                                            aria-hidden="true"
                                        />
                                        <wa-button
                                            id="upload-spells-btn"
                                            class="filter-menu-upload-btn"
                                            appearance="plain"
                                            variant="neutral"
                                            size="small"
                                            title="Upload spell JSON"
                                            aria-label="Upload spell JSON"
                                        >
                                            <wa-icon name="upload" slot="start" aria-hidden="true"></wa-icon>
                                            Upload spell JSON
                                        </wa-button>
                                    </div>
                                    <div class="filter-chip-group">
                                        <span class="filter-chip-label"
                                            >Class</span
                                        >
                                        <div
                                            id="filter-class-chips"
                                            class="filter-chip-list"
                                        ></div>
                                    </div>
                                    <div class="filter-chip-group">
                                        <span class="filter-chip-label"
                                            >Level</span
                                        >
                                        <div
                                            id="filter-level-chips"
                                            class="filter-chip-list"
                                        ></div>
                                    </div>
                                    <div class="filter-chip-group">
                                        <span class="filter-chip-label"
                                            >School</span
                                        >
                                        <div
                                            id="filter-school-chips"
                                            class="filter-chip-list"
                                        ></div>
                                    </div>
                                </div>
                            </wa-dropdown>
                        </div>
                    </div>

                    <!-- Row 2: download left, add/clear right (icon-only). Upload is in filter menu. -->
                    <div class="controls-row controls-row--actions">
                        <div class="controls-row__group">
                            <wa-button
                                id="download-custom-btn"
                                variant="default"
                                size="small"
                                title="Download custom"
                                aria-label="Download custom JSON"
                            >
                                <wa-icon name="download"></wa-icon>
                            </wa-button>
                        </div>
                        <div class="controls-row__group">
                            <wa-button
                                id="add-empty-btn"
                                variant="default"
                                size="small"
                                title="Add empty card"
                                aria-label="Add empty card"
                            >
                                <wa-icon name="file-circle-plus" aria-hidden="true"></wa-icon>
                            </wa-button>
                            <wa-button
                                id="add-glossary-btn"
                                variant="default"
                                size="small"
                                title="Add glossary"
                                aria-label="Add glossary card"
                            >
                                <wa-icon name="book"></wa-icon>
                            </wa-button>
                            <wa-button
                                id="clear-all-btn"
                                variant="default"
                                size="small"
                                title="Clear all"
                                aria-label="Clear all cards"
                            >
                                <wa-icon name="trash"></wa-icon>
                            </wa-button>
                        </div>
                    </div>

                    <!-- Row 3: card options (toggles) -->
                    <div class="controls-row controls-row--card-options">
                        <wa-switch id="color-toggle">Grayscale</wa-switch>
                        <wa-switch id="inline-icons-toggle" checked
                            >Inline icons</wa-switch
                        >
                        <wa-switch id="background-toggle">Card back</wa-switch>
                    </div>

                    <!-- Row 4: layout options -->
                    <div class="controls-row controls-row--layout">
                        <span class="controls-select-with-icon" title="Page size">
                            <wa-icon name="file-lines" aria-hidden="true"></wa-icon>
                            <wa-select id="page-size-select" value="letter">
                                <wa-option value="letter">Letter</wa-option>
                                <wa-option value="a4">A4</wa-option>
                            </wa-select>
                        </span>
                        <span class="controls-select-with-icon" title="Sort order">
                            <wa-icon name="arrows-up-down" aria-hidden="true"></wa-icon>
                            <wa-select id="sort-select" value="level">
                                <wa-option value="alphabetical">A–Z</wa-option>
                                <wa-option value="level">By level</wa-option>
                                <wa-option value="school">By school</wa-option>
                            </wa-select>
                        </span>
                        <wa-switch id="side-by-side-toggle"
                            >Side by side</wa-switch
                        >
                    </div>

                    <!-- Row 5: print -->
                    <div class="controls-row controls-row--print">
                        <wa-button id="print-btn" variant="primary"
                            title="Print or save as PDF"
                        >
                            <wa-icon name="print" slot="prefix"></wa-icon>
                            Print / Save as PDF
                        </wa-button>
                    </div>
                </div>
                </div>
            </div>
        </header>

        <div id="main-container">
            <div id="printable-area-wrapper">
                <main id="printable-area"></main>
            </div>
        </div>

        <div id="edit-card-overlay" class="overlay hidden" aria-hidden="true">
            <div class="edit-overlay-panel">
                <div class="edit-overlay-preview">
                    <div id="edit-card-preview"></div>
                </div>
                <div class="edit-overlay-form-wrapper">
                    <div id="edit-card-form" class="edit-overlay-form"></div>
                    <div class="edit-overlay-actions">
                        <wa-button id="edit-card-cancel" variant="default"
                            >Cancel</wa-button
                        >
                        <wa-button id="edit-card-save" variant="primary"
                            >Save</wa-button
                        >
                    </div>
                </div>
            </div>
        </div>

        <wa-dialog
            id="srd-excluded-dialog"
            label="Non-SRD spells"
            class="srd-excluded-dialog"
            light-dismiss
        >
            <button
                type="button"
                class="srd-dialog-icon-btn"
                slot="header-actions"
                id="srd-excluded-copy"
                aria-label="Copy to clipboard"
            >
                <wa-icon name="copy" aria-hidden="true"></wa-icon>
            </button>
            <p id="srd-excluded-explanation"></p>
            <div id="srd-excluded-list" class="srd-excluded-list"></div>
        </wa-dialog>

        <div id="toast" class="toast hidden" aria-live="polite"></div>

        <footer class="footer">
            <div class="container">
                <p>
                    © 2025 Wunderpus. The Wunderpus logo and spell cards
                    are copyright Wunderpus.
                </p>
                <p>
                    The spell cards and the spell card generator are licensed under a
                <a
                    href="http://creativecommons.org/licenses/by/4.0/"
                    target="_blank"
                    >Creative Commons Attribution 4.0 International
                    License</a
                    >.
                <br />
                    This work is not affiliated with, endorsed, or sponsored by
                    Wizards of the Coast LLC.
                </p>
            </div>
        </footer>

        <script src="js/nav.js"></script>
        <script type="module" src="js/card-editor.js"></script>
    </body>
</html>
